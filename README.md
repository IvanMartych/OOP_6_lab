# Лабораторная работа №6

## Тема: "***<u>Паттерны проектирования</u>***"

### Цель:

- Закрепление паттернов SOLID

### Порядок выполнения работы:

- Ознакомиться с теоретическим материалом

- Реализовать задание в соответствии с вариантом (Вариант 18)

- Написать Unit-тесты с использованием Google Test

- Отчитаться по выполненной работе путём демонстрации работающей программы на тестовых наборах данных (как подготовленных самостоятельно, так и предложенных преподавателем) и ответов на вопросы преподавателя (как из числа контрольных, так и по реализации программы).

### Требования к программе:

Вы разрабатываете редактор подземелья для новой RPG игры Balagur Fate 3. Ваша задача сделать программу, которая позволит моделировать базовые локации, расставляя на них NPC (non-player characters).

Редактор должен позволять делать следующие действия:

1. Добавлять новые NPC по разным координатам (типы объектов предопределены заданием)
   
   - NPC размещаются в квадрате `0 <= x <= 500` метров, `0 <= y <= 500` метров
   
   - У каждого типа объекта помимо координат должно быть уникальное имя.

2. Сохранять объекты в файл и загружать из файла

3. Печатать перечень объектов на экран (с типом объектов, координатами и именем)

4. Запускать боевой режим с указанием дальности, на которой могут сражаться `NPC`. В боевом режиме `NPC` начинают сражаться каждый с каждым (если дальность позволяет), проигравший `NPC` – удаляется. При этом погибнуть могут и оба `NPC`.

При создании программы обязательно использовать паттерны:

- Какой-нибудь из вариантов Factory для создания NPC и загрузки NPC из файла

- `Visitor` – для проведения цикла сражения

- `Observer` – для печати событий о совершенных убийствах. Сделать два класса `Observer` – для 
  записи в файл `battle_log.txt` и для печати на экран.

## Условие задачи (Вариант 18):

| Объекты              | Правило совместимости     |
|:--------------------:|:-------------------------:|
| Странствующий рыцарь | Рыцарь убивает белок      |
| Белка                | Белки убивают пегасов     |
| Пегас                | Пегасы никого не трогают  |

---

## Структура проекта

```
6_lab/
├── CMakeLists.txt
├── main.cpp
├── README.md
│
├── include/
│ ├── npc.h
│ ├── knight.h
│ ├── pegasus.h
│ ├── squirrel.h
│ ├── factory.h
│ ├── arena.h
│ ├── visitor.h
│ ├── combat_visitor.h
│ ├── observer.h
│ ├── console_observer.h
│ └── file_observer.h
│
├── src/
│ ├── npc.cpp
│ ├── knight.cpp
│ ├── pegasus.cpp
│ ├── squirrel.cpp
│ ├── factory.cpp
│ ├── arena.cpp
│ └── combat_visitor.cpp
│
└── tests/
├── test_npc.cpp
├── test_factory.cpp
├── test_arena.cpp
├── test_combat.cpp
├── test_file_loading.cpp
└── test_data_npcs.txt
```

## Сборка и запуск проекта

**Сборка:**

```bash
# создание директории для сборки
mkdir build
cd build

# конфигурация проекта
cmake ..

# сборка проекта
cmake --build .
```

**Запуск основной программы:**

```bash
./6_lab_exe
```

## Запуск тестов:

```bash
# запуск всех тестов
ctest --output-on-failure

# или запуск отдельного теста
ctest -R test_npc --verbose

# прямой запуск исполняемых файлов тестов
./6_lab_test_npc
./6_lab_test_factory
./6_lab_test_arena
./6_lab_test_combat
./6_lab_test_file_loading
```
